language: php

sudo: false

php:
- 7.0
- 7.1
- 7.2
- 7.3
- nightly

before_script:
- composer install --no-interaction --prefer-source --dev

script:
- vendor/bin/codeception
- vendor/bin/phpcs --standard=phpcs.xml
- find {src, app, test} -name "*.php" ! -path '*/NonPHP7.php' -print0 | xargs -0 -n1 -P8 php -l


matrix:
  fast_finish: true
  allow_failures:
  - php: nightly

after_success:
- php vendor/bin/coveralls